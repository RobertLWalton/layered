% The Layered Middle (M) Programming Language
%
% File:         layered-m-language.tex
% Author:       Bob Walton (walton@deas.harvard.edu)
% Version:      1a
  
\documentclass[12pt]{article}

\usepackage{makeidx}

\makeindex

\setlength{\oddsidemargin}{0in}
\setlength{\evensidemargin}{0in}
\setlength{\textwidth}{6.5in}
\raggedbottom

\pagestyle{headings}
\setlength{\parindent}{0.0in}
\setlength{\parskip}{1ex}

% Begin \tableofcontents surgery.

\newcount\ATCATCODE
\ATCATCODE=\catcode`@
\catcode `@=11	% @ is now a letter

\renewcommand{\contentsname}{}
\renewcommand\l@section{\@dottedtocline{1}{0.1em}{1.4em}}
\renewcommand\l@table{\@dottedtocline{1}{0.1em}{1.4em}}
\renewcommand\tableofcontents{%
    \begin{list}{}%
	     {\setlength{\itemsep}{0in}%
	      \setlength{\topsep}{0in}%
	      \setlength{\parsep}{1ex}%
	      \setlength{\labelwidth}{0in}%
	      \setlength{\baselineskip}{1.5ex}%
	      \setlength{\leftmargin}{1.0in}%
	      \setlength{\rightmargin}{1.0in}}%
    \item\@starttoc{toc}%
    \end{list}}
\renewcommand\listoftables{%
    \begin{list}{}%
	     {\setlength{\itemsep}{0in}%
	      \setlength{\topsep}{0in}%
	      \setlength{\parsep}{1ex}%
	      \setlength{\labelwidth}{0in}%
	      \setlength{\baselineskip}{1.5ex}%
	      \setlength{\leftmargin}{1.0in}%
	      \setlength{\rightmargin}{1.0in}%
	      }%
    \item\@starttoc{lot}%
    \end{list}}

\catcode `@=\ATCATCODE	% @ is now restored

% End \tableofcontents surgery.

\newcommand{\CN}[2]%	Change Notice.
    {\hspace*{0in}\marginpar{\sloppy \raggedright \it \footnotesize
     $^{\mbox{#1}}$#2}}
    % Change notice.

\newcommand{\key}[1]{{\em #1}\index{#1}}
\newcommand{\mkey}[2]{{\em #1}\index{#1!#2}}
\newcommand{\skey}[2]{{\em #1#2}\index{#1}}
\newcommand{\ikey}[2]{{\em #1}\index{#2}}
\newcommand{\ttkey}[1]{{\tt #1}\index{#1@{\tt #1}}}
\newcommand{\ttmkey}[2]{{\tt #1}\index{#1@{\tt #1}!#2}}
\newcommand{\ttfkey}[2]{{\tt #1}\index{#1@{\tt #1}!for #2@for {\tt #2}}}
\newcommand{\ttakey}[2]{{\tt #1}\index{#2@{\tt #1}}}
\newcommand{\ttamkey}[3]{{\tt #1}\index{#2@{\tt #1}!#3}}
\newcommand{\ttindex}[1]{\index{#1@{\tt #1}}}
\newcommand{\ttmindex}[2]{\index{#1@{\tt #1}!#2}}
\newcommand{\emkey}[1]{{\em #1}\index{#1@{\em #1}}}
\newcommand{\emindex}[1]{\index{#1@{\em #1}}}

\newcommand{\EOL}{\penalty \exhyphenpenalty}

\newsavebox{\leftbracket}
\begin{lrbox}{\leftbracket}
\verb|{|
\end{lrbox}

\newsavebox{\rightbracket}
\begin{lrbox}{\rightbracket}
\verb|}|
\end{lrbox}

\newcommand{\ttbrackets}{
    \renewcommand{\{}{\usebox{\leftbracket}}
    \renewcommand{\}}{\usebox{\rightbracket}}}

\newlength{\figurewidth}
\setlength{\figurewidth}{\textwidth}
\addtolength{\figurewidth}{-0.40in}

\newsavebox{\figurebox}

\newenvironment{boxedfigure}[1][!btp]%
	{\begin{figure*}[#1]
	 \begin{lrbox}{\figurebox}
	 \begin{minipage}{\figurewidth}

	 \vspace*{1ex}}%
	{
	 \vspace*{1ex}

	 \end{minipage}
	 \end{lrbox}
	 \begin{center}
	 \fbox{\hspace*{0.1in}\usebox{\figurebox}\hspace*{0.1in}}
	 \end{center}
	 \end{figure*}}

\newenvironment{indpar}[1][0.3in]%
	{\begin{list}{}%
		     {\setlength{\itemsep}{0in}%
		      \setlength{\topsep}{0in}%
		      \setlength{\parsep}{1ex}%
		      \setlength{\labelwidth}{#1}%
		      \setlength{\leftmargin}{#1}%
		      \addtolength{\leftmargin}{\labelsep}}%
	 \item}%
	{\end{list}}

\begin{document}
        
\begin{center}

{\Large
The Layered Middle (M) Programming Language \\[0.5ex]
(Draft 1a)}

\medskip

Robert L. Walton\footnote{This document is dedicated to the memory
of Professor Thomas Cheatham of Harvard University.}

November 23, 2006
 
\end{center}

{\small
\tableofcontents 
}

\newpage

\section{Introduction}

This describes the Middle Layer Programming Language, otherwise
known as the M-Language.  See the Introduction to the Layered
Programming Languages for an overview of the related
Lower Layer L and Higher Layer H languages.


\section{Memory}

M-language memory consists of blocks which are sequences of bits.
Blocks can be contained in other blocks or can overlap.  Blocks
can be allocated to memory or be free to be moved hither and yon
during program execution.  Numbers, such as integers and floating
point numbers, are blocks, and when used as arguments or returned
as results, are free.

Some blocks allocated to memory are `movable', meaning they can be
moved almost anytime.  Others are fixed in particular permanent
locations.  A movable block needs a reference address, which always
points at the movable block, and which is stored in a fixed block
so it can always be found.  A movable block can be deallocated
almost anytime by moving it to unimplemented virtual memory.

Movable blocks can be allocated and deallocated at any time.
A movable block can be a stack that grows up or down, and
subblocks can be allocated to or deallocated from the growing
boundary of a stack.

A variable is a sequence of blocks.  The first block in the sequence
is the type descriptor for the variable.  Many variables have only
two blocks: a type descriptor, and a value block.  Some have a third
subtype descriptor block.  In principal there can be any number of
blocks, but unless the first is a recognizable type descriptor, few
operations can be defined on the variable.

Parts of a variable may become constant at different times.
The type descriptor is often a compile time constant, meaning that
it is constant from the time the variable is created.
A subtype descriptor is typically in initialization constant,
meaning it is constant after the variable is initialized at
run time.  The value block of a variable may never be constant.
On the other hand, all the variable's blocks may be compile time
constants: a compile constant is in the M-Language is just a variable all
of whose blocks became constant at compile time.

The different components of a variable obey different protocols that
determine when they become constant.  The {\tt wr} protocol says
that a component is readable and writable at any time.  {\tt w/r} says
that all writes occur before all reads.  {\tt w/a/r} says that
writes occur first, then accumulates, then reads, where accumulates are
operations that may be exchanged, such as incrementing the variable
component by various amounts.

Detailed definitions of the above concepts are given in the following
sections.






\bibliographystyle{plain}
\bibliography{layered-introduction}

\printindex

\end{document}

