// Layers Language Parser Bracketed Command Test Data
//
// File:	ll_parser_bracketed_command_test.in
// Author:	Bob Walton (walton@acm.org)
// Date:	Sat Jan 31 06:45:20 EST 2015
//
// The authors have placed this data in the public
// domain; they make no warranty and accept no liability
// for this data.

parser print bracket ""

parser define bracket "[+"
parser define bracket "[+" ...
parser print context "default"
parser define selector text
parser define selector code
parser define selector math
parser define selector operator 1
parser print selector ""
parser print context "default"
parser define bracket "(" ... ")" [code, math, text]
parser define bracket "[" ... "]" [code, math, text]
parser print bracket "["
parser define gluing indentation mark ":" ... ";" [code, math, text]
parser print bracket ":"
parser define bracket "[+" ... "+]" [text, operator 2]
parser define bracket "<+" ... "+>" [text + operator]
parser define bracket "<+" ... "+>" [code, operator 1]
       with parsing selectors [^ code, - math, + operator 1]
       with full lines
parser print bracket "<+"

parser test "abc"
            "def"
parser test:
	"abc"
	"def"

parser trace [ + subexpression lines,
               + subexpression elements]
parser test <+ hi there +> <+ hi [embedded] there +>
parser define bracket "[X" ... "X]" [code, operator 1]
       with parsing selectors [- code, + operator 1]
parser test [ a [ b c ] c ] [X a [ b c ] d X]
parser test this is a paragraph +:
    line 1
    line 2a:: line 2b; line 2c
    last line
parser define indentation mark "+:" ... "::" [code]
parser test this is a paragraph +:
    line 1
    line 2a:: line 2b; line 2c
    last line
parser test  <X| hi there |X>
parser trace [+ foo]
parser trace [+ parser commands]
parser trace [- parser commands]
parser trace [+ parser commands]
parser trace [+ warnings]
parser begin block 1
parser define bracket "<*" ... "*>" [code]
parser test <* hi there A *>
parser end block x
parser test <* hi there B *>
parser end block 1
parser test <* hi there C *>
parser end block 1
parser define bracket "<|" ... "|>" [code]
parser test <| hi there D |>
parser begin block 1
parser undefine bracket "<|" ... "|>" [code]
parser test <| hi there E |>
parser undefine bracket "<|" ... "|>" [code]
parser end block 1
parser test <| hi there F |>
parser undefine bracket "<|" ... "|>" [code]
parser test <| hi there F |>
parser undefine bracket "<|" ... "|>" [code]

parser define bracket "`" ... "'" [code]
parser define bracket "```" ... "'''" [code]
       with full lines
parser print bracket ""
parser test ( ``` ) ''' )
parser test ( ```
)
''' )
parser test ( ` ) ' )
parser test ( `
)
' )

parser begin block 1
parser define indentation offset 4
parser print indentation offset
first line with indent 0
 line with indent 1
second line with indent 0
  line with indent 2
third line with indent 0
    line with indent 4
parser end block 1

parser print indentation offset
first line with indent 0
 line with indent 1
second line with indent 0
  line with indent 2
third line with indent 0
    line with indent 4
