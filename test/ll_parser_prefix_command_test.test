*PARSER*:
    trace [+ parser output]
    define selector text
    define typed bracket "{" ... "|" ... "|" ... "}"
        [code, text]
        // no element selectors
        with attribute selectors [data]
        with attributes ":" ... "=" ... ","
        with attribute negator "no"
        with attribute flags initiator "["
        with attribute multivalue initiator "{*"
        with prefix separators allowed
*PARSER*:
    begin block X
    define prefix "p" [TOP LEVEL]
        with parsing options [end at paragraph break, sticky]
        with group paragraph
        with parsing selectors [+ text, - code]
        with implied subprefix {s}
    define prefix "s" [text]
        with sentence reformatter
            ( ".", ";", ":", "?", "!" )
    define prefix "code" [text]
        with group paragraph
        with parsing options [+ reset]
    print prefix ""
        block X: prefix "p" [TOP LEVEL]
                 with parsing selectors [- code, + text]
                 with group paragraph
                 with implied subprefix {s||s}
                 with parsing options [end at paragraph break, sticky]
        block X: prefix "s" [text]
                 with sentence reformatter ( ".", ";", ":", "?", "!" )
        block X: prefix "code" [text]
                 with group paragraph
                 with parsing options [+ reset]
BRACKETED EXPRESSION:
    {p|{s: .terminator = ":"|This is a sentence|s}
       {s: .terminator = "."|an add-on|s}
       {s: .terminator = ";"|A phrase|s}
       {s: .terminator = "?"|and a question|s}|p}
BRACKETED EXPRESSION:
    And a line of code "."
*PARSER*:
    end block X
